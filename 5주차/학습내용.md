5주차 (2020.10.30 ~ 2020.11.6)

# 감정 대화 분류 MZ CEC 해커톤 참가

감정 및 상황 정보가 레이블된 데이터를 보고 
총 60가지의 소분류된 감정을 알아내야 한다. 
데이터 파일은 JSON 파일로 되어있다.

![포스터](https://user-images.githubusercontent.com/72618459/99274947-4390aa80-286e-11eb-8641-9acf15287fed.PNG)

이번 5주차에는 데이터파일인 JSON의 구조를 이해할 수 없어 JSON 구조에 대해 공부하였다.

# JSON
JSON

	참고 - http://www.tcpschool.com/json/intro

# JSON 구조
		JSON은 자바스크립트의 객체 표기법으로부터 파생된 부분 집합.
		1. JSON 데이터는 이름과 값의 쌍으로 이루어진다.
		2. JSON 데이터는 쉼표로 나열된다.
		3. 객체는 중괄호로 둘러쌓아 표현한다.
		4. 배열은 대괄호로 둘러쌓아 표현한다.

# JSON 데이터

		JSON 데이터는 이름과 값의 쌍으로 구성된다.
		JSON 데이터는 데이터 이름, 콜론, 값의 순서로 구성된다.
			ex) "데이터이름":값
		데이터의 이름도 문자열이므로 항상 큰따옴표와 함께 
		입력해야 한다.
		데이터의 값으로는 다음과 같은 타입이 올 수 있다.
		1. 숫자 - 8진수나 16진수 등을 표현하는 방법은 
			제공하지 않는다.
			1.1. 정수
			1.2. 실수
			1.3. 지수
		2. 문자열 - \와 ""는 이스케이프 시퀀스로 표현
		3. 불리언(boolean) - 1 or 0 값으로 표현할 수 없다. 
			항상 소문자 true, false로 표기
		4. 객체(object) - 데이터 이름과 값의 한 쌍으로 
			구성된 프로퍼티의 정렬되지 않은 집합
		5. 배열 - 여러 개의 데이터가 순서를 가지고 나열된 집합. 
			배열은 데이터의 값만을 나열한다. 여러 타입의 
			배열 요소를 동시에 가질 수 있다.
		6. null - 아무런 값도 가지고 있지 않은 빈 값. 
			항상 소문자로 표기. 

# JSON 스키마

		적합한 JSON 데이터의 형식을 기술한 문서.

# JSON 스키마 검증(validation)
		1. 데이터의 타입이 정확한가?
		2. 필수로 받아와야 하는 데이터가 포함되어 있는가?
		3. 데이터가 원하는 범위 안에 있는가?
		위와 같은 검증 기준을 모두 키워드를 이용하여 
		직접 명시할 수 있다.

# 검증 키워드
		키워드를 사용하여 여러 가지 조건을 걸어줄 수 있다.
		대표적인 검증 키워드
		type - 유효한 데이터의 타입을 명시함.
		properties - 유효한 데이터 이름과 값의 쌍들을 명시함.
		required - 명시한 배열의 모든 요소를 프로퍼티로 
					가지고 있어야만 유효함.
		minimum
		maximum
		multipleOf - 명시한 숫자의 배수만 유효함.
		maxLength
		minLength
		pattern - 명시한 정규 표현식에 해당하는 문자열만 유효함.

		스키마에 대한 정보를 나타내는 메타 데이터 키워드
		1. title
		2. description
		3. default

# 범위 검증
		키워드 exclusiveMaximum 값 - true, false
		값이 true 이면 최댓값으로 maximum 키워드로 명시된 
		값을 포함하지 않는다.
		따로 명시하지 않으면 기본값으로 false를 저장
		ex) "exclusiveMaximum":true, 
			"maximum":10, "minimum":1
			-> 데이터는 n은 (1 <= n < 10)

# 정규 표현식 검증
		pattern 키워드를 사용하여 문자열이 명시된 정규 표현식과 
		일치하는지 검사 할 수 있다.
		정규 표현식은 문자열에서 특정한 규칙을 가지는 문자열의 
		집합을 찾아내기 위한 검색 패턴.
		JSON에서는 자바스크립트에서 사용할 수 있는 정규 표현식 
		문법을 모두 사용할 수 있다.
		

	필수 프로퍼티 검증
		required 키워드를 사용하여 해당 객체가 
		반드시 가지고 있어야 하는 필수 프로퍼티를 명시할 수 있다. 
		필수 프로퍼티가 하나 이상이라면, 배열을 이용하여 
		각 필수 프로퍼티의 이름을 나열하면 된다.
		ex) "required":["name", "family"]

	프로퍼티의 개수 검증
		minProperties와 maxProperies 키워드를 사용하여 
		객체가 가질 수 있는 프로퍼티 개수의 최솟값과 최댓값을 
		명시할 수 있다.

	배열 요소 검증
		item 키워드를 사용하여 해당 배열에 저장된 배열 요소에 대한 
		검증을 수행할 수 있다.
		additionalItems 키워드의 값을 false로 명시하면 추가로 
		다른 배열 요소를 가지는 배열은 검증을 통과하지 못하게 된다.
		minItem, maxItem 키워드를 사용하여 배열이 가질 수 있는 
		길이의 최솟값과 최댓값 명시.
		uniqueItem 키워드를 사용하여 배열 요소에 대한 
		중복 값 허용 여부 명시.

	열거형 데이터 검증
		enum 키워드를 사용하여 해당 데이터가 
		명시된 배열에 속한 값인지 검사.
		enum 값들은 배열을 사용하여 명시하며, 
		중복 값을 가질 수는 없다.

# 스키마 결합
		1. allOf - 명시된 배열에 나열된 모든 JSON 스키마를 
		한 번에 검사할 수 있다.
		배열에 나열된 스키마에 대한 검증을 모두 통과해야 한다.
		
		2. anyOf - 배열에 나열된 하나 이상의 스키마에 대한 검증을 
		통과해야 한다.

		3. oneOf - 배열에 나열된 오직 하나의 스키마에 대한
		검증만을 통과해야 한다.

	not 키워드를 사용하여 명시된 JSON 스키마를 만족하지 않는 
	데이터만을 검사할 수 있다.


# 해커톤에서 제시한 데이터 구조
![데이터 예시](https://user-images.githubusercontent.com/72618459/99276402-f7df0080-286f-11eb-8707-6fcd0b25a0fb.PNG)

이러한 형식으로 된 데이터가 약 20,000개 정도 주어진다.

# 실습 내용

	주어진 데이터 구조를 알아내었고, 주어진 데이터를 이용해 
	감정을 분석하기 위해서 
	사용자의 정보보다는 사용자의 대화를 통해 감정을 분석할 수 있다고 
	생각했다. 
	사용자의 대화는 'talk':'content' 부분으로 HS와 SS로 나누어진다. 
	HS는 사용자의 대화이고, SS는 시스템의 대화이다. 
	대화는 HS01로 시작해 시스템과 2~3가지의 대화를 나눈다.
	그래서 첫번째로 파이썬에서 JSON파일의 데이터를 가져오고 
	그 JSON파일에서 필요한 부분을 가져오는 방법을 학습하였다. 
	주어진 데이터의 양이 너무 많아 test.json파일을 만들고 
	3가지의 데이터를 저장하였다. 
	대화부분을 하나하나 list에 넣어주었다.
	실습코드 test1.py
![json 실습 1](https://user-images.githubusercontent.com/72618459/99278260-2cec5280-2872-11eb-843b-9aeec5d6e7cc.PNG)

# 오류 해결

	이번 실습 중에 
	UnicodeDecodeError: 'cp949' codec can't decode byte
	0xec in position 317: illegal multibyte sequence
	라는 오류가 나왔었고
	이 오류는 cp949 코덱으로 인코딩 된 파일을 읽어들일 때 
	나오는 오류였다.
	with open('train_data.json', 'r') as f: 를
	with open('train_data.json', 'r', encoding='UTF8') as f: 
	로 바꾸어서 해결하였다.
